<html>
  <head>
    <script src="https://cdn.socket.io/4.3.2/socket.io.min.js" integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs" crossorigin="anonymous"></script>
    <script>
      const userData = {
        id: 1,
        device: "MB",
        token: ""
      };
      const socket = io('http://localhost:3000/', {
        query: {
          userId: userData.id,
          userDevice: userData.device,
        }
      });
      socket.on('connect', function() {
        console.log('[Client] Connected');

        socket.on('token', ({ token }) => {
          userData.token = token
          console.log('[Client] userData', userData);
          socket.emit('identify', { userToken: userData.token, userId: userData.id }, response =>
            console.log('[Client] Identify:', response),
          );
        });
        socket.on('message', function(message) {
          console.log('[Client] Message:', message.data);
        });
      });
      socket.on('disconnect', function() {
        console.log('[Client] Disconnected');
      });
    </script>
  </head>

  <body></body>
</html>